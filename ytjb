#!/bin/bash
#
# ytjb - plays audio from youtube 
#
# This script requires mpv and youtube-dl
#

# Config file 
PINPCONF="$HOME/.config/pinp/pinp.conf"

# Create config file if does not exist
if [ ! -f $PINPCONF ]; then
       install -D -m644 /etc/pinp/pinp.conf.default $PINPCONF 
fi

# Import settings from config file
. $PINPCONF

_no=1


stream_songs()
{
    mpv "$1" --no-video
}

stream_search()
{
    mpv $(youtube-dl --format bestaudio --get-url "ytsearch$_no:$1") 
}




if [[ "$1" =~ ^"http" ]]; then
        stream_songs "$1"

elif [[ "$2" =~ ^[0-9]*$ ]]; then
        _no="$2"
        stream_search "$1"

else
        case "$1" in
                
                *) stream_search "$1";;

        esac

fi 
